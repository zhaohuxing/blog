## 到底什么是 Serverless?

分别从狭义和广义来定义：

狭义：FaaS 架构 = Trigger（事件驱动）+ FaaS（函数即服务）+ BaaS（后端即服务）= FaaS + BaaS

广义：服务端免运维 = 具备 Serverless 特性的云服务

## FaaS 运行逻辑

Serverless 是对服务端运维体系的极端抽象。

具体来说，之前我们需要在服务端构建代码的运行环境，而 FaaS 应用将这一步抽象为函数服务；之前我们需要负载均衡和反向代理，而 FaaS 应用将这一步抽象为 HTTP 函数触发器；之前我们需要上传代码和启动应用，而 FaaS 应用将这一步抽象为函数代码。

FaaS 与 PaaS 最大的区别是：资源利用率，FaaS 应用实例可以缩容到 0，而 PaaS 至少为 1。

#### FaaS 为什么可以极速启动？

FaaS 中的冷启动是指从调用函数开始到函数实例准备完成的整个过程。冷启动，我们关注的是启动时间，基本在 100 ~ 700 毫秒。

<img src="../../../../../Library/Application Support/typora-user-images/image-20210603010236906.png" style="zoom:50%;" />

一般会预先加载用户的实例代码，以做预热启动。

冷启动中最重要的技术：分层结构。大概可分为三层：容器，runtime，具体函数代码。

总结来说，FaaS 依赖分层调度和极速冷启动的特性，在无事件时它居然可以缩容到 0，就像我们的声控灯一样，有人的时候它可以亮起来，没人的时候，又可以自动关了。

## FaaS 进程模型

从运行函数实例的进程角度看，有两种模型：

- 用完即毁型：函数实例准备好后，执行完函数就直接结束。（FaaS 的纯正用法）
- 常驻进程型：函数实例准备好后，执行完函数不结束，而是返回继续等待下一次函数被调用。这里注意，FaaS 是常驻进程型，如果一段时间没有事件触发，函数实体还是会被云服务商销毁的。

## FaaS 应用如何才能快速扩缩容？

将 FaaS 无状态话，持久化存储用 BaaS 代替。